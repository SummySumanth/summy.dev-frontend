name: ğŸš€ Deploy to Google Cloud App Engine

on:
  release:
    types: [created]

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: â¬‡ï¸ Checkout code 
              uses: actions/checkout@v3

            - name: ğŸ› ï¸ Setup Node.js 
              uses: actions/setup-node@v3
              with:
                node-version: '20'

            - name: ğŸ“¦ Install dependencies 
              run: npm ci

            - name: ğŸ—ï¸ Build Project
              run: npm run build

            - name: ğŸ” Authenticate to Google Cloud
              uses: google-github-actions/auth@v1
              with:
                credentials_json: ${{ secrets.GCP_CREDENTIALS }}

            - name: ğŸ› ï¸ Set up Google Cloud SDK
              uses: google-github-actions/setup-gcloud@v1
              with:
                project_id: ${{ secrets.GCP_PROJECT_ID }}
            
            - name: ğŸš€ Deploy to Google Cloud App Engine
              run: gcloud app deploy --quiet
